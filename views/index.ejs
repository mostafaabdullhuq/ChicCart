<%- include('./layouts/main_start.ejs') %>
<%- include('./layouts/header.ejs') %>
<!--!! content start !!-->
<main class="content">
    <!--!! image carousel start !!-->
    <section id="carousel" class="carousel">
        <div class="carousel-info-container">
            <div class="carousel-overlay"></div>
            <p class="carousel-text">All your needs in one place.</p>
            <button class="carousel-button">
                <a href="/products" class="carousel-button-anchor"> Shop Now</a>
            </button>
        </div>
        <!-- carousel items start -->
        <div class="carousel-items-container">
            <!-- carousel item start -->
            <div class="carousel-item carousel-item-active">
                <img class="carousel-item-image" src="https://api.lorem.space/image/furniture?w=640&h=480&r=9667"
                    alt="Shop Product" srcset="" />
            </div>
            <!-- carousel item end -->
            <!-- carousel item start -->
            <div class="carousel-item">
                <img class="carousel-item-image" src="https://api.lorem.space/image/shoes?w=640&h=480&r=8230"
                    alt="Shop Product" srcset="" />
            </div>
            <!-- carousel item end -->
            <!-- carousel item start -->
            <div class="carousel-item">
                <img class="carousel-item-image" src="https://api.lorem.space/image/watch?w=640&h=480&r=8346"
                    alt="Shop Product" srcset="" />
            </div>
            <!-- carousel item end -->

            <!-- carousel item start -->
            <div class="carousel-item">
                <img class="carousel-item-image" src="https://api.lorem.space/image/fashion?w=640&h=480&r=5765"
                    alt="Shop Product" srcset="" />
            </div>
            <!-- carousel item end -->
        </div>
        <!-- carousel items end -->
    </section>
    <!--!! image carousel end !!-->
    <!--!! website intro start !!-->
    <section class="website-intro-container">
        <div class="website-intro-item">
            <div class="website-intro-image-container">
                <img src="/assets/images/Free shipping-amico.svg" class="object-contain" alt="" />
            </div>
            <p>Free Shipping</p>
        </div>
        <div class="website-intro-item">
            <div class="website-intro-image-container">
                <img src="/assets/images/Service 24_7-pana.svg" class="object-contain" alt="" />
            </div>
            <p>24/7 Hour Support</p>
        </div>
        <div class="website-intro-item">
            <div class="website-intro-image-container">
                <img src="/assets/images/Refund-pana.svg" class="object-contain" alt="" />
            </div>
            <p>100% Money Back Guarantee</p>
        </div>
    </section>
    <!--!! website intro end !!-->
    <!--!! website products start !!-->
    <% if (products.length) {  %>
    <section class="products">
        <h1 class="text-2xl font-bold p-6  w-full text-center md:text-start">Newest Arrivals</h1>
        <div class="products-container">
            <% for (let product of products) { %>
            <!-- product start -->
            <div class="product" id="product-<%=product.id%>">
                <a href="/product/<%= product.id %>" class=" absolute inset-0"></a>

                <div class="product-image-container group">
                    <div class="product-overlay">
                        <form action="/cart" method="post">
                            <input type="hidden" name="quantity" value="1">
                            <input type="hidden" name="id" value="<%= product.id %>">
                            <button type="submit" class="product-add-to-cart">
                                <i class="fa-solid fa-cart-plus"></i>
                            </button>
                        </form>
                    </div>
                    <img src="<%=product.images[0]%>" alt="" class="product-image" />
                </div>
                <p class="product-title">
                    <a href="/product/<%=product.id%>"><%=product.title%></a>
                </p>
                <div class="product-info">
                    <div class="product-price">$<%=product.price%></div>
                    <div class="product-rating">
                        <% for (let i = 0; i < 5; i++) { %>
                        <% if (i < Number(String(product.rating).split('.')[0])) { %>
                        <i class="fa-solid fa-star"></i>
                        <% } else if (i === Number(String(product.rating).split('.')[0]) && Number(String(product.rating).split('.')[1]) ) { %>
                        <i class="fa-solid fa-star-half-stroke"></i> <% } else { %>
                        <i class="fa-regular fa-star"></i>
                        <% } %>
                        <% } %>
                    </div>
                </div>
            </div>
            <!-- product end -->
            <%}%>
                    </div>
    </section>
    <%} %>
            <!--!! website products end !!-->
</main>
<!--!! content start !!-->
<%- include('./layouts/footer.ejs') %>
<!-- script for carousel auto image slide -->
<script>
    let carouselItems = document.querySelector(".carousel-items-container").children;
    let activeItem = 0;
    setInterval((_) => {
        Array.from(carouselItems).forEach((item) => {
            item.classList.remove("carousel-item-active");
        });
        activeItem = activeItem++ == carouselItems.length - 1 ? 0 : activeItem++;
        carouselItems[activeItem].classList.add("carousel-item-active");
    }, 5000);
</script>
<%- include('./layouts/main_end.ejs') %>